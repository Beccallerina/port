export var PyScript = "\nimport pandas as pd\n\n\ndef process():\n    chat_file_name = yield prompt_file()\n    usernames = extract_usernames(chat_file_name)\n    username = yield prompt_radio(usernames)\n    yield result(usernames, username)\n\n\ndef prompt_file():\n    title = Translatable()\n    title.add(\"en\", \"Step 1: Select the chat file\")\n    title.add(\"nl\", \"Stap 1: Selecteer het chat file\")\n\n    description = Translatable()\n    description.add(\"en\", \"We previously asked you to export a chat file from Whatsapp. Please select this file so we can extract relevant information for our research.\")\n    description.add(\"nl\", \"We hebben je gevraagd een chat bestand te exporteren uit Whatsapp. Je kan deze file nu selecteren zodat wij er relevante informatie uit kunnen halen voor ons onderzoek.\")\n\n    extensions = \"application/zip, text/plain\"\n\n    return FileInput(title, description, extensions)\n\n\ndef prompt_radio(usernames):\n    title = Translatable()\n    title.add(\"en\", \"Step 2: Select your username\")\n    title.add(\"nl\", \"Stap 2: Selecteer je gebruikersnaam\")\n\n    description = Translatable()\n    description.add(\"en\", \"The following users are extracted from the chat file. Which one are you?\")\n    description.add(\"nl\", \"De volgende gebruikers hebben we uit de chat file gehaald. Welke ben jij?\")\n\n    return RadioInput(title, description, usernames)\n\n\ndef extract_usernames(chat_file_name):\n    print(f\"filename: {chat_file_name}\")\n\n    with open(chat_file_name) as chat_file:\n        while (line := chat_file.readline().rstrip()):\n            print(line)\n\n    return [\"emielvdveen\", \"a.m.mendrik\", \"9bitcat\"]\n\n\ndef result(usernames, selected_username):\n    data = []\n    for username in usernames:\n        description = \"you\" if username == selected_username else \"-\"\n        data.append((username, description))\n\n    data_frame = pd.DataFrame(data, columns=[\"username\", \"description\"])\n\n    print(data_frame)\n\n    result = [{\n        \"id\": \"overview\",\n        \"title\": \"The following usernames where extracted:\",\n        \"data_frame\": data_frame\n    }]\n    return EndOfFlow(result)\n";
